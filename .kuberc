source <(kubectl completion bash)
complete -o default -F __start_kubectl k

function klog() {
    local NAME=$1; shift
    local POD=$(kubectl get pods | \grep ${NAME} | \grep Running | awk '{print $1}')
    kubectl logs $@ ${POD}
}

alias kf='ps -ef | \grep kubectl | grep -v grep'

function kfk() {
    ps -ef | \grep kubectl | grep -v grep | awk '{print $2}' | xargs kill
}

function kadd() {
  REGION="$2"
  if [ -z "${REGION}" ]; then REGION="us-east-2"; fi
  aws eks update-kubeconfig --region ${REGION} --name $1    
  kubectl config rename-context "arn:aws:eks:${REGION}:724664234782:cluster/$1" $1
}

function kc() {
  if [ -z "$1" ]; then
    kubectl config get-contexts
    return
  fi
  kubectl config use-context "$1" ; sleep 1
  kubectl config set-context --current --namespace="chariot"
}
 
function kdeleteall() {
    set -x
    kubectl delete all -n chariot -l "app.kubernetes.io/name=$1"
    set +x
}
